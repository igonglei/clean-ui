!function(t,o){"use strict";"function"==typeof define&&define.amd?define(["jquery"],o):"object"==typeof module&&"object"==typeof module.exports?module.exports=o(require("jquery")):t.divbar=o(t.jQuery)}(this,function(t){var o={borderColor:"#2D4A34",borderWidth:1,borderStyle:"solid",margin:2,divs:15,color:["#486F14,#8EC63F,47%","#539102,#8DC53E,14%","#D9B404,#FFA800,14%","#D64C01,#D84C00,25%"],value:0,animation:!0,duration:100,beat:3,beatDuration:100},r={name:"divbar",init:function(o){for(var r=t(o.dom),n=o.options,i=n.divs,e=n.margin,a=r.height()/i-e,s=0;s<i;s++)r.append("<div></div>");var d=r.children();d.css({"border-color":n.borderColor,"border-width":n.borderWidth,"border-style":n.borderStyle,height:a,"margin-bottom":e,transition:"all .1s ease-in-out"}),this.fillColor(o,d,n)},fillColor:function(t,o,r){for(var n=this,i=r.divs,e=Math.ceil(r.value*i),a=this.getColor(r.color,i),s=r.animation,d=r.duration,u=function(t){o.eq(i-t-1).css(a[t])},c=function(){n.beat(t,o,e,a)},f=0;f<e;f++)s?function(t){setTimeout(function(){u(t)},d*t)}(f):u(f);s?setTimeout(c,d*e):c()},getColor:function(o,r){var n=this,i=[];return t.each(o,function(t,o){for(var e=o.split(","),a=e[0],s=e[1],d=Math.round(n.parsePercent(e[2])*r),u=0;u<d;u++)i.push({"background-color":a,"border-color":s})}),i},parsePercent:function(t){return t.replace(/%$/g,"")/100},beat:function(t,o,r,n){var i=t.options,e=i.beat;if(!(e<=0)){var a=i.divs,s=Math.max(0,r-e-1),d=Math.min(a,r+e),u=r,c=!0,f={"background-color":"","border-color":i.borderColor};t.interval=setInterval(function(){u===d?(c=!1,u--):u===s&&(c=!0,u++);var t=c?n[u]||{}:f;o.eq(a-u-1).css(t),c?u++:u--},i.beatDuration)}}},n=function(r,n){this.dom=r,this.options=t.extend({},o,n),this.init()};return n.prototype={constructor:n,init:function(){r.init(this)}},t.fn.divbar=function(o,i){return"string"==typeof o?t.fn.divbar.methods[o](this[0],i):this.each(function(){var i=new n(this,o);return t.data(this,r.name,i),i})},t.fn.divbar.methods={instance:function(o){return t.data(o,r.name)},options:function(t){return this.instance(t).options}},t.fn.divbar.defaults=o,n});